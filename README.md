# FMSV Project: SAT-based System Verification

This project focuses on solving two SAT encoding problems using the CaDiCaL SAT solver. The problems include an **Exact Cover problem** and a **Graph Coloring problem**. Additionally, there is a bonus task to run CNF files on CaDiCaL and plot their solving times in a cactus plot.

### Contents
- [Project Structure](#project-structure)
- [Setup](#setup)
- [Usage](#usage)
  - [Exact Cover Problem](#exact-cover-problem)
  - [Graph Coloring Problem](#graph-coloring-problem)
  - [Bonus: Cactus Plot for CNF Instances](#bonus-cactus-plot-for-cnf-instances)
- [Dependencies](#dependencies)

## Project Structure

The project directory contains the following files and folders:

- **`input.txt`**: The input matrix file for the Exact Cover problem.
- **`input_generator.cpp`**: Generates the `input.txt` file for the Exact Cover problem.
- **`exact_cover.cpp`**: Encodes the Exact Cover problem and generates the `exact_cover.cnf` file.
- **`mcgregor.cpp`**: Encodes the McGregor Graph Coloring problem and generates the `mcgregor.cnf` file.
- **`script.sh`**: Runs all `.cnf` instances in the `instances` folder on CaDiCaL.
- **`plottingscript.py`**: Generates a cactus plot based on the results of the CNF instances.
- **`/instances`**: Contains downloaded `.cnf` instances for the cactus plot generation.
- **`/results`**: Stores CaDiCaL output files generated by `script.sh`.

## Setup

1. **Install the CaDiCaL SAT Solver**:
   - Follow the [CaDiCaL GitHub repository](https://github.com/arminbiere/cadical) README instructions to install CaDiCaL. This includes building the solver and ensuring the binary is accessible from your terminal.

2. **Compile Project Files**:
   ```bash
   g++ input_generator.cpp -o input_generator
   g++ exact_cover.cpp -o exact_cover
   g++ mcgregor.cpp -o mcgregor
   ```

3. **Set Up Directories**:
   - Ensure the `instances` folder contains your .cnf files for the cactus plot task.
   - Confirm the `results` directory exists in the CaDiCaL directory to store SAT solver output.

## Usage

### 1. Exact Cover Problem

The Exact Cover problem requires a matrix in `input.txt`. Run the following steps in order:

- **Step 1**: Generate the `input.txt` file.
  ```bash
  ./input_generator
  ```
  This creates the input matrix in `input.txt` for use by `exact_cover.cpp`.

- **Step 2**: Generate the CNF file from the `input.txt` matrix.
  ```bash
  ./exact_cover
  ```
  This outputs `exact_cover.cnf`, which is the SAT-encoded CNF file for the Exact Cover problem.

- **Step 3**: Run the SAT Solver on the CNF file.
   ```bash
   ./cadical/build/cadical exact_cover.cnf
   ```
   This outputs the SAT solver results to your terminal or specified output file.

### 2. Graph Coloring Problem (McGregor Graph)

This problem requires encoding the McGregor graph (order 10) with specific coloring constraints.

- **Step 1**: Generate the CNF file.
  ```bash
  ./mcgregor
  ```
  This generates `mcgregor.cnf`, the SAT-encoded CNF file for the Graph Coloring problem.

- **Step 2**: Run the SAT Solver on the generated CNF file.
  ```bash
  ./cadical/build/cadical mcgregor.cnf
  ```
  The SAT solver will output the result, indicating whether a valid 4-color configuration exists.

### 3. Bonus: Cactus Plot for CNF Instances

In this task, we evaluate the performance of the CaDiCaL SAT solver on various `.cnf` instances and generate a cactus plot to visualize time vs. instances solved.

- **Step 1**: Run the `script.sh` to execute all CNF files in the `instances` directory.
  ```bash
  ./script.sh
  ```
  The outputs for each instance are stored in the `results` folder.

- **Step 2**: Generate the Cactus Plot.
  ```bash
  python3 plottingscript.py
  ```
  This will produce a cactus plot showing the time taken to solve each instance versus the cumulative number of instances solved.

## Dependencies

- **CaDiCaL SAT Solver**: Install per the instructions in the [CaDiCaL repository](https://github.com/arminbiere/cadical).
- **Python 3.x**: Required for the `plottingscript.py`.
  - **Matplotlib**: Install with `pip install matplotlib` for generating the cactus plot.

---

